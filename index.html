<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Juan Serratos</title>

  <!-- SVG Favicon -->
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <!-- Fallback for browsers that don't support SVG favicons -->
  <link rel="alternate icon" type="image/png" href="favicon.png">
  <!-- For iOS devices -->
  <link rel="apple-touch-icon" href="favicon.png">

  <!-- MathJax Configuration -->
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [['$','$'], ["\\(","\\)"]],
        processEscapes: true
      }
    });
  </script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>

  <style>
    /*─────────────────────────────────────────────────────────────────────────────*/
    /*  COLOR VARIABLES FOR LIGHT/DARK                                           */
    /*─────────────────────────────────────────────────────────────────────────────*/
    :root {
      --bg-color: #ffffff;
      --text-color: #000000;
      --link-color: #0066cc;
      --heading-color: #333333;
      --border-color: #dddddd;
      --toggle-bg: #f0f0f0;
      --toggle-circle: #555555;

      /* “ant-white” always matches the page background exactly */
      --ant-white: var(--bg-color);
      --ant-black: #1a1a1a;
    }

    [data-theme="dark"] {
      --bg-color: #333333;
      --text-color: #f0f0f0;
      --link-color: #88bbff;
      --heading-color: #ffffff;
      --border-color: #555555;
      --toggle-bg: #555555;
      --toggle-circle: #f0f0f0;

      /* “ant-white” again = page background */
      --ant-white: var(--bg-color);
      --ant-black: #e0e0e0;
    }

    /*─────────────────────────────────────────────────────────────────────────────*/
    /*  BASIC PAGE STYLING                                                        */
    /*─────────────────────────────────────────────────────────────────────────────*/
    body {
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      line-height: 1.6;
      max-width: 1600px;
      margin: 0 auto;
      padding: 20px;
      font-size: 11px;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    h1, h2, h3 {
      color: var(--heading-color);
    }

    h1 {
      font-size: 2.2em;
      margin-bottom: 20px;
    }

    h2 {
      font-size: 1.6em;
      margin-top: 30px;
      margin-bottom: 10px;
    }

    h3 {
      font-size: 1.3em;
      margin-top: 20px;
      margin-bottom: 10px;
    }

    main {
      display: flex;
      flex-direction: row;
      width: 100%;
    }

    .column {
      padding: 10px;
    }

    .about {
      flex: 2;
      max-width: 800px;
    }

    /*─────────────────────────────────────────────────────────────────────────────*/
    /*  ANTLON’S CANVAS (FULLSCREEN, NO BLENDING)                                  */
    /*─────────────────────────────────────────────────────────────────────────────*/
    #antContainer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      overflow: hidden;
      z-index: -1;
    }

    #antCanvas {
      width: 100%;
      height: 100%;
      display: block;
      border: none;
      background-color: var(--bg-color);
    }

    a {
      color: var(--link-color);
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }

    figcaption {
      text-align: center;
      margin: 10px 0;
      font-size: 11px;
    }

    .project-details {
      margin-left: 20px;
      margin-bottom: 20px;
    }

    .project-visualizations {
      margin-top: 10px;
    }
    .project-visualizations ul {
      margin-top: 5px;
    }

    /*─────────────────────────────────────────────────────────────────────────────*/
    /*  DARK MODE TOGGLE BUTTON                                                    */
    /*─────────────────────────────────────────────────────────────────────────────*/
    .dark-mode-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border-radius: 50%;
      background-color: var(--toggle-bg);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      transition: background-color 0.3s ease;
      z-index: 10;
    }

    .moon-icon, .sun-icon {
      width: 20px;
      height: 20px;
      position: absolute;
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .moon-icon { opacity: 0; }
    .sun-icon { opacity: 1; }

    [data-theme="dark"] .moon-icon { opacity: 1; }
    [data-theme="dark"] .sun-icon { opacity: 0; }

    /* SVG stroke‐width tweak in dark mode (optional) */
    [data-theme="dark"] svg path,
    [data-theme="dark"] svg line,
    [data-theme="dark"] svg circle,
    [data-theme="dark"] svg rect {
      stroke-width: 1;
    }

    @media (max-width: 768px) {
      main {
        flex-direction: column;
      }
      .dark-mode-toggle {
        bottom: 10px;
        left: 10px;
      }
    }
  </style>
</head>

<body>
  <h1>Juan Serratos</h1>

  <div class="dark-mode-toggle" id="darkModeToggle">
    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
         fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1"  x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
         fill="none" stroke="currentColor" stroke-width="2">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
    </svg>
  </div>

  <main>
    <div class="column about">
      <h2>About</h2>
      <p>
        I am a first‐year graduate student in mathematics at the University of Pennsylvania.
        Last summer I was supported as a research fellow at MIT’s CSAIL as part of SGI.
        I completed my undergraduate studies at the University of Southern California (USC)
        in the Spring of 2024. Broadly speaking, I’m interested in the subject of
        $\mathbf{Q}$‐points and the interplay between different areas of mathematics
        with the subject. My research interests fit under the umbrella term of arithmetic geometry.
        The interplay that I’ve indulged most of my time on is $\mathbf{Q}$‐points and algebraic geometry,
        but I’m learning more, and becoming more interested, by the Galois theory aspect relating to
        $\pi_1^{\text{ét}}$.
      </p>
      <ul>
        <li><a href="cv.pdf">CV</a></li>
      </ul>

      <h2>Research papers</h2>
      <ul>
        <li>
          <a href="https://arxiv.org/abs/2304.03523">
            On the prime spectrum of the $p$‐adic integer polynomial ring with a depiction
          </a>
        </li>
      </ul>

      <h2>Projects</h2>
      <ul>
        <li>
          <a href="projects/projects/portfolio-optimization.html">
            Hierarchical Reinforcement Learning System for Multi‐Asset Portfolio Optimization
          </a>
        </li>
        <li>
          <a href="https://summergeometry.org/sgi2024/reduced-deformation-collision-detection/">
            Reduced deformation collision detection, MIT CSAIL
          </a>
        </li>
      </ul>

      <h2>Papers</h2>
      <p>Additional papers will be posted soon.</p>

      <h2>Notes</h2>
      <p>Notes are temporarily unavailable.</p>

      <h2>Contact</h2>
      <p>My email is <a href="mailto:serratos@upenn.edu"><u>serratos@upenn.edu</u></a>.</p>
    </div>
  </main>

  <div id="antContainer">
    <canvas id="antCanvas" width="1200" height="1200"></canvas>
  </div>

  <script>
    //─────────────────────────────────────────────────────────────────────────────
    //  DARK MODE TOGGLE
    //─────────────────────────────────────────────────────────────────────────────
    const darkModeToggle = document.getElementById('darkModeToggle');
    const htmlElement    = document.documentElement;
    const canvas         = document.getElementById('antCanvas');
    const ctx            = canvas.getContext('2d');

    // If user previously chose a theme, use it; otherwise pick system preference:
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      htmlElement.setAttribute('data-theme', savedTheme);
    } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      htmlElement.setAttribute('data-theme', 'dark');
    }

    darkModeToggle.addEventListener('click', () => {
      const currentTheme = htmlElement.getAttribute('data-theme');
      const newTheme = (currentTheme === 'light') ? 'dark' : 'light';
      htmlElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);

      updateColors();
      redrawGrid();

      // Rerender any MathJax if present
      if (window.MathJax && MathJax.Hub) {
        MathJax.Hub.Queue(["Rerender", MathJax.Hub]);
      }
    });

    //─────────────────────────────────────────────────────────────────────────────
    //  LANGTON’S ANT SETUP
    //─────────────────────────────────────────────────────────────────────────────
    const cellSize = 3;
    const cols = Math.floor(canvas.width / cellSize);
    const rows = Math.floor(canvas.height / cellSize);

    // Grid of 0/1 for each cell. 0 = “white,” 1 = “black.”
    const grid = Array.from({ length: rows }, () => new Array(cols).fill(0));

    let whiteColor = '#ffffff';
    let blackColor = '#1a1a1a';

    function updateColors() {
      const styles = getComputedStyle(document.documentElement);
      whiteColor = styles.getPropertyValue('--bg-color').trim();
      blackColor = styles.getPropertyValue('--ant-black').trim();
    }

    function redrawGrid() {
      // Paint entire canvas with the background color first
      ctx.fillStyle = whiteColor;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Draw every “black” cell
      for (let y = 0; y < rows; y++) {
        for (let x = 0; x < cols; x++) {
          if (grid[y][x] === 1) {
            ctx.fillStyle = blackColor;
            ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
          }
        }
      }
    }

    function drawCell(x, y) {
      if (grid[y][x] === 1) {
        ctx.fillStyle = blackColor;
        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
      } else {
        ctx.fillStyle = whiteColor;
        ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
      }
    }

    class Ant {
      constructor(x, y) {
        this.x = x;
        this.y = y;
        this.dir = Math.floor(Math.random() * 4); // 0=up,1=right,2=down,3=left
      }
      step() {
        const state = grid[this.y][this.x];
        grid[this.y][this.x] = state ^ 1;
        drawCell(this.x, this.y);
        this.dir = (this.dir + (state === 0 ? 1 : 3)) % 4;
        if (this.dir === 0) this.y = (this.y - 1 + rows) % rows;
        else if (this.dir === 1) this.x = (this.x + 1) % cols;
        else if (this.dir === 2) this.y = (this.y + 1) % rows;
        else this.x = (this.x - 1 + cols) % cols;
      }
    }

    // Create ants
    const ants = [];
    for (let i = 0; i < 15; i++) {
      ants.push(new Ant(
        Math.floor(cols * 0.5 + Math.random() * cols * 0.5),
        Math.floor(Math.random() * rows)
      ));
    }
    for (let i = 0; i < 10; i++) {
      ants.push(new Ant(
        Math.floor(Math.random() * cols),
        Math.floor(rows * 0.8 + Math.random() * rows * 0.2)
      ));
    }

    updateColors();
    redrawGrid();

    // Adjusted for faster animation
    const stepDelay = 50;     // milliseconds between frames (was 200)
    let stepsPerFrame = 15;   // ant‐steps per frame (was 5)

    function animate() {
      for (let i = 0; i < stepsPerFrame; i++) {
        ants.forEach(a => a.step());
      }
      setTimeout(() => requestAnimationFrame(animate), stepDelay);
    }
    animate();
  </script>
</body>
</html>
